(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{17:function(t,e,n){t.exports={contactBtn:"ContactForm_contactBtn__UwxoL",contactform:"ContactForm_contactform__3qQZc",contactLabel:"ContactForm_contactLabel__1JL7P",contactInput1:"ContactForm_contactInput1__2ip9u",contactInput:"ContactForm_contactInput__2RB3W"}},18:function(t,e,n){t.exports={list:"ContactList_list__wBUks",item:"ContactList_item__2d7ox",itemCont:"ContactList_itemCont__10UiA",text:"ContactList_text__2I4MP",btn:"ContactList_btn__3FJsY"}},32:function(t,e,n){t.exports={filter:"SearchFilter_filter__2OGrz",input:"SearchFilter_input__1-fuf",filterSearch:"SearchFilter_filterSearch__3spXB"}},50:function(t,e,n){t.exports={container:"Container_container__1-kjH"}},86:function(t,e,n){},92:function(t,e,n){"use strict";n.r(e);var c,r=n(1),a=n.n(r),i=n(28),o=n.n(i),s=n(8),l=n(2),u=n(45),b=n(4),j=n(19),d=n(46),h=n.n(d),O=n(47),f=n.n(O),p=n(48),x=n.n(p),m=n(6),g=n(51),v=n(7),y=Object(b.b)("contacts/ChangeFilter"),C=Object(b.b)("contacts/addContactRequest"),k=Object(b.b)("contacts/addContactSuccess"),_=Object(b.b)("contacts/addContactError"),w=Object(b.b)("contacts/deleteContactRequest"),L=Object(b.b)("contacts/deleteContactSuccess"),S=Object(b.b)("contacts/deleteContactError"),F=Object(b.b)("contacts/getContactsRequest"),A=Object(b.b)("contacts/getContactsSuccess"),I=Object(b.b)("contacts/getContactsError"),N=Object(b.d)([],(c={},Object(m.a)(c,A,(function(t,e){return e.payload})),Object(m.a)(c,k,(function(t,e){var n=e.payload;return[].concat(Object(g.a)(t),[n])})),Object(m.a)(c,L,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),c)),B=Object(b.d)("",Object(m.a)({},y,(function(t,e){return e.payload}))),U=Object(v.combineReducers)({contacts:N,filter:B}),R=n(16),W=n.n(R),z=n(25),T=n(14),D=n.n(T);D.a.defaults.baseURL="https://connections-api.herokuapp.com";var E,V,q=function(t){D.a.defaults.headers.common.Authorization="Bearer ".concat(t)},J=function(){D.a.defaults.headers.common.Authorization=""},P=Object(b.c)("auth/register",function(){var t=Object(z.a)(W.a.mark((function t(e,n){var c,r,a;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,D.a.post("/users/signup",e);case 4:return r=t.sent,a=r.data,q(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",c(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),Z=Object(b.c)("auth/login",function(){var t=Object(z.a)(W.a.mark((function t(e,n){var c,r,a;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n.rejectWithValue,t.prev=1,t.next=4,D.a.post("/users/login",e);case 4:return r=t.sent,a=r.data,q(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",c(t.t0));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),M=Object(b.c)("auth/logout",function(){var t=Object(z.a)(W.a.mark((function t(e,n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.a.post("/users/logout");case 3:J(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue());case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}()),H=Object(b.c)("auth/refresh",function(){var t=Object(z.a)(W.a.mark((function t(e,n){var c,r,a,i;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(r=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return q(r),t.prev=5,t.next=8,D.a.get("/users/current");case 8:return a=t.sent,i=a.data,t.abrupt("return",i);case 13:t.prev=13,t.t0=t.catch(5),n.rejectWithValue();case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}()),G={register:P,logOut:M,logIn:Z,fetchCurrentUser:H},Q=Object(b.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(E={},Object(m.a)(E,G.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(m.a)(E,G.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(m.a)(E,G.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(m.a)(E,G.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(m.a)(E,G.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(m.a)(E,G.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),E)}).reducer,X={key:"auth",storage:h.a,whitelist:["token"]},Y=Object(b.a)({reducer:{auth:f()(X,Q),phonebook:U},middleware:function(t){return t({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})},devTools:!1}),$=x()(Y),K=(n(86),n(5)),tt=function(t){return t.auth.isLoggedIn},et=function(t){return t.auth.user.name},nt=function(t){return t.auth.isFetchingCurrentUser},ct=n(0),rt={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12},button:(V={display:"block",border:"none",font:"inherit",cursor:"pointer",outline:"none",padding:"3px 15px",margin:"auto"},Object(m.a)(V,"border","1px solid #06196eab"),Object(m.a)(V,"color","black"),Object(m.a)(V,"borderRadius",5),V)};function at(){var t=Object(l.b)(),e=Object(l.c)(et);return Object(ct.jsxs)("div",{style:rt.container,children:[Object(ct.jsxs)("span",{style:rt.name,children:["\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ",e]}),Object(ct.jsx)("button",{type:"submit",style:rt.button,onClick:function(){return t(G.logOut())},children:"\u0412\u044b\u0439\u0442\u0438"})]})}var it={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function ot(){return Object(ct.jsxs)("div",{children:[Object(ct.jsx)(s.b,{to:"/register",style:it.link,activeStyle:it.activeLink,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(ct.jsx)(s.b,{to:"/login",style:it.link,activeStyle:it.activeLink,children:"\u041b\u043e\u0433\u0438\u043d"})]})}var st={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"},link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function lt(){var t=Object(l.c)(tt);return Object(ct.jsxs)("header",{style:st.header,children:[Object(ct.jsxs)("nav",{children:[Object(ct.jsx)(s.b,{to:"/",exact:!0,style:st.link,activeStyle:st.activeLink,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),t&&Object(ct.jsx)(s.b,{to:"/contacts",style:st.link,activeStyle:st.activeLink,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"})]}),t?Object(ct.jsx)(at,{}):Object(ct.jsx)(ot,{})]})}var ut=Object(r.memo)(lt),bt=n(50),jt=n.n(bt);function dt(t){var e=t.children;return Object(ct.jsx)("div",{className:jt.a.container,children:e})}var ht={container:{minHeight:"calc(100vh - 50px)",alignItems:"center",marginTop:70},title:{fontWeight:500,fontSize:48,textAlign:"center"},title2:{fontWeight:400,fontSize:36,textAlign:"center",marginTop:70}},Ot=function(){return Object(ct.jsx)("div",{style:ht.container,children:Object(ct.jsxs)("h1",{style:ht.title,children:["\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0441\u0432\u043e\u044e ",Object(ct.jsx)("br",{}),"\u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u0443\u044e \u043a\u043d\u0438\u0433\u0443 ",Object(ct.jsx)("br",{})," ",Object(ct.jsx)("span",{role:"img","aria-label":"\u0418\u043a\u043e\u043d\u043a\u0430 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u044f",children:"\ud83d\udcdd"}),Object(ct.jsxs)("p",{style:ht.title2,children:["\u0427\u0442\u043e\u0431\u044b \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0430\u0448\u0438\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u043e\u043c, ",Object(ct.jsx)("br",{}),Object(ct.jsx)(s.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c"})," ",Object(ct.jsx)("br",{})," \u0438\u043b\u0438"," ",Object(ct.jsx)(s.b,{to:"/login",children:"\u0412\u043e\u0439\u0434\u0438\u0442\u0435"})," ",Object(ct.jsx)("br",{}),"\u0432 \u0432\u0430\u0448 \u0430\u043a\u043a\u0430\u0443\u043d\u0442."]})]})})},ft=n(15),pt={form:{width:320,margin:"auto"},label:{display:"flex",flexDirection:"column",marginBottom:15},button:{display:"block",border:"none",font:"inherit",cursor:"pointer",outline:"none",padding:"8px 24px",margin:"auto",backgroundColor:"#06196eab",color:"white",borderRadius:5}};function xt(){var t=Object(l.b)(),e=Object(r.useState)(""),n=Object(ft.a)(e,2),c=n[0],a=n[1],i=Object(r.useState)(""),o=Object(ft.a)(i,2),s=o[0],u=o[1],b=Object(r.useState)(""),j=Object(ft.a)(b,2),d=j[0],h=j[1],O=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"name":return a(c);case"email":return u(c);case"password":return h(c);default:return}};return Object(ct.jsxs)("div",{children:[Object(ct.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(ct.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(G.register({name:c,email:s,password:d})),a(""),u(""),h("")},style:pt.form,autoComplete:"off",children:[Object(ct.jsxs)("label",{style:pt.label,children:["\u0418\u043c\u044f",Object(ct.jsx)("input",{type:"text",name:"name",value:c,onChange:O})]}),Object(ct.jsxs)("label",{style:pt.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(ct.jsx)("input",{type:"email",name:"email",value:s,onChange:O})]}),Object(ct.jsxs)("label",{style:pt.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(ct.jsx)("input",{type:"password",name:"password",value:d,onChange:O})]}),Object(ct.jsx)("button",{type:"submit",style:pt.button,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})}var mt={form:{width:320,margin:"auto"},label:{display:"flex",flexDirection:"column",marginBottom:15},button:{display:"block",border:"none",font:"inherit",cursor:"pointer",outline:"none",padding:"8px 24px",margin:"auto",backgroundColor:"#06196eab",color:"white",borderRadius:5}};function gt(){var t=Object(l.b)(),e=Object(r.useState)(""),n=Object(ft.a)(e,2),c=n[0],a=n[1],i=Object(r.useState)(""),o=Object(ft.a)(i,2),s=o[0],u=o[1],b=function(t){var e=t.target,n=e.name,c=e.value;switch(n){case"email":return a(c);case"password":return u(c);default:return}};return Object(ct.jsxs)("div",{children:[Object(ct.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d\u0430"}),Object(ct.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(G.logIn({email:c,password:s})),a(""),u("")},style:mt.form,autoComplete:"off",children:[Object(ct.jsxs)("label",{style:mt.label,children:["\u041f\u043e\u0447\u0442\u0430",Object(ct.jsx)("input",{type:"email",name:"email",value:c,onChange:b})]}),Object(ct.jsxs)("label",{style:mt.label,children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(ct.jsx)("input",{type:"password",name:"password",value:s,onChange:b})]}),Object(ct.jsx)("button",{type:"submit",style:mt.button,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}D.a.defaults.baseURL="https://connections-api.herokuapp.com";var vt=function(t){return function(e){e(C()),D.a.post("/contacts",t).then((function(t){var n=t.data;e(k(n))})).catch((function(t){return e(_(t))}))}},yt=function(t){return function(e){e(w()),D.a.delete("/contacts/".concat(t)).then((function(){e(L(t))})).catch((function(t){return e(S(t))}))}},Ct=function(){return function(t){t(F()),D.a.get("/contacts").then((function(e){var n=e.data;t(A(n))})).catch((function(e){return t(I(e))}))}},kt=n(29),_t=function(t){return t.phonebook.filter},wt=function(t){return t.phonebook.contacts},Lt=Object(kt.a)([wt,_t],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))})),St={getAllContacts:wt,getFilter:_t,getVisibleContacts:Lt},Ft=n(17),At=n.n(Ft),It=function(){var t=Object(r.useState)(""),e=Object(ft.a)(t,2),n=e[0],c=e[1],a=Object(r.useState)(""),i=Object(ft.a)(a,2),o=i[0],s=i[1],u=Object(l.c)((function(t){return St.getAllContacts(t)})),b=Object(l.b)(),j=function(t){var e=t.target,n=e.name,r=e.value;switch(n){case"name":c(r);break;case"number":s(r);break;default:return}};return Object(ct.jsx)("div",{className:At.a.contactform,children:Object(ct.jsxs)("form",{onSubmit:function(t){t.preventDefault(),u.find((function(t){return t.name.toLowerCase()===n.toLowerCase()}))?alert("".concat(n," is already in contacts")):b(vt({name:n,number:o})),c(""),s("")},children:[Object(ct.jsxs)("label",{className:At.a.contactLabel,children:["Name :",Object(ct.jsx)("input",{type:"text",name:"name",value:n,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,onChange:j,className:At.a.contactInput1})]}),Object(ct.jsxs)("label",{htmlFor:"",className:At.a.contactLabel,children:["Number :",Object(ct.jsx)("input",{type:"tel",name:"number",value:o,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,onChange:j,className:At.a.contactInput})]}),Object(ct.jsx)("button",{type:"submit",className:At.a.contactBtn,children:"Add contact"})]})})},Nt=n(32),Bt=n.n(Nt);var Ut=function(){var t=Object(l.c)((function(t){return St.getFilter(t)})),e=Object(l.b)();return Object(ct.jsx)("div",{className:Bt.a.filterSearch,children:Object(ct.jsxs)("label",{className:Bt.a.filter,children:["Find contacts by name:",Object(ct.jsx)("input",{type:"text",name:"filter",value:t,onChange:function(t){return e(y(t.target.value))},className:Bt.a.input})]})})};function Rt(t){var e=t.message;return Object(ct.jsx)("h3",{children:e})}var Wt=n(18),zt=n.n(Wt),Tt=function(){var t=Object(l.b)();Object(r.useEffect)((function(){t(Ct())}),[t]);var e=Object(l.c)((function(t){return St.getAllContacts(t)})),n=Object(l.c)((function(t){return St.getVisibleContacts(t)}));return Object(ct.jsxs)("div",{children:[Object(ct.jsx)("h2",{children:"Contacts"}),e.length>0?Object(ct.jsxs)(r.Fragment,{children:[Object(ct.jsx)(Ut,{}),Object(ct.jsx)("ul",{className:zt.a.list,children:0===n.length?Object(ct.jsx)("li",{className:zt.a.itemCont,children:Object(ct.jsx)("h4",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})}):n.map((function(e){var n=e.id,c=e.name,r=e.number;return Object(ct.jsxs)("li",{className:zt.a.item,children:[Object(ct.jsxs)("p",{className:zt.a.text,children:[c," :"]}),Object(ct.jsxs)("p",{className:zt.a.text,children:[r," "]}),Object(ct.jsx)("button",{type:"button",name:n,onClick:function(){return t(yt(n))},className:zt.a.btn,children:"Delete"})]},n)}))})]}):Object(ct.jsx)(Rt,{message:"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432 \u043f\u0443\u0441\u0442\u043e\u0439"})]})};function Dt(){return Object(ct.jsxs)("div",{children:[Object(ct.jsx)("h1",{children:"Phonebook"}),Object(ct.jsx)(It,{}),Object(ct.jsx)(Tt,{})]})}var Et=n(21),Vt=n(31),qt=["children","redirectTo"];function Jt(t){var e=t.children,n=t.redirectTo,c=void 0===n?"/":n,r=Object(Vt.a)(t,qt),a=Object(l.c)(tt);return Object(ct.jsx)(K.b,Object(Et.a)(Object(Et.a)({},r),{},{children:a?e:Object(ct.jsx)(K.a,{to:c})}))}var Pt=["children","restricted","redirectTo"];function Zt(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=t.redirectTo,a=void 0===r?"/":r,i=Object(Vt.a)(t,Pt),o=Object(l.c)(tt)&&c;return Object(ct.jsx)(K.b,Object(Et.a)(Object(Et.a)({},i),{},{children:o?Object(ct.jsx)(K.a,{to:a}):e}))}var Mt=function(){var t=Object(l.b)(),e=Object(l.c)(nt);return Object(r.useEffect)((function(){t(G.fetchCurrentUser())}),[t]),Object(ct.jsx)(dt,{children:e?Object(ct.jsx)("h2",{children:"loading..."}):Object(ct.jsxs)(r.Fragment,{children:[Object(ct.jsx)(ut,{}),Object(ct.jsx)(K.d,{fallback:Object(ct.jsx)("h3",{children:"Loading..."}),children:Object(ct.jsxs)(r.Suspense,{children:[Object(ct.jsx)(Zt,{exact:!0,path:"/",children:Object(ct.jsx)(Ot,{})}),Object(ct.jsx)(Zt,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(ct.jsx)(gt,{})}),Object(ct.jsx)(Zt,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(ct.jsx)(xt,{})}),Object(ct.jsx)(Jt,{path:"/contacts",redirectTo:"/register",children:Object(ct.jsx)(Dt,{})})]})})]})})};o.a.render(Object(ct.jsx)(a.a.StrictMode,{children:Object(ct.jsx)(l.a,{store:Y,children:Object(ct.jsx)(u.a,{loading:null,persistor:$,children:Object(ct.jsx)(s.a,{children:Object(ct.jsx)(Mt,{})})})})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.3ff5f3b6.chunk.js.map